name: TestCache

on:
  # This line enables manual triggering of this workflow.
  workflow_dispatch:
  
 jobs:
  Testcache:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash

    steps:
      # Checkout the code
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0

      # Checkout the code
      - name: Restore the previous run result
        uses: martijnhols/actions-cache@v3.0.2
        with:
          path: |
            ~/run_result
          key: testrunresult
          restore-keys: |
            testrunresult
            
      - name: Get the previous run result
        id: run_result
        run: cat ~/run_result 2>/dev/null || echo 'default'
 
       # Set status = success
      - run: echo "test" > ~/run_result
 
      - name: Store the previous run result
        uses: martijnhols/actions-cache/save@v3
        with:
          path: |
            ~/run_result
          key: testrunresult
          restore-keys: |
            testrunresult  
