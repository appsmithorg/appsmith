name: gitcachetest

on:
  # This line enables manual triggering of this workflow.
  workflow_dispatch:

jobs:
  ci-test-limited:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
    strategy:
      fail-fast: false


    steps:
      - name: Set up Depot CLI
        uses: depot/setup-action@v1

      # Checkout the code in the current branch in case the workflow is called because of a branch push event
      - name: Checkout the head commit of the branch
        if: inputs.pr == 0
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
       # Create cache dir
      - name: Create cache dir
        if: steps.run_result.outputs.run_result != 'success' && steps.run_result.outputs.run_result != 'failedtest'
        run: |
          mkdir ./cacherepo
           git config --global user.email "yatin@appsmith.com"
           git config --global user.name "Yatinappsmith"

      - name: Checkout
        uses: actions/checkout@v2
        with:
          repository: yatinappsmith/testcacherepo
          path: './cacherepo'

      - name: Addfile
        if: steps.run_result.outputs.run_result != 'success' && steps.run_result.outputs.run_result != 'failedtest'
        run: |
          touch ./cacherepo/abcdefgh.txt
          git add ./cacherepo/abcdefgh.txt
          git commit -m "test"
          git push
          
      
