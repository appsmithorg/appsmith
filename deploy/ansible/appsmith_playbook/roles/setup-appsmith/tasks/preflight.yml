---

- name: Check folder installation exist and empty
  stat:
    path: '{{ install_dir }}'
  register: installDir

- name: Throw error when installation directory is existed and not empty
  vars:
    msg: |
      The {{ install_dir }} folder is existed and not empty.
      Appsmith may already run on this server. Please check out from this address http://{{ansible_host}}
  debug:
    msg: "{{ msg.split('\n') }}"
  when: installDir.stat.exists

- name: Stop playbook if installation directory is existed and not empty
  assert:
    that:
      - installDir.stat.exists == False
    quiet: true
