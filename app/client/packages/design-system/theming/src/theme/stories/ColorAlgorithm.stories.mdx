import { TokenTable, StyledSquarePreview } from "@design-system/storybook";
import { Meta } from "@storybook/addon-docs";
import React from "react";
import { useState } from "react";
import { useTheme, ThemeProvider } from "@design-system/theming";
import { ColorControl, BooleanControl } from "@storybook/blocks";
import { Flex, Text } from "@design-system/widgets";
import { defaultTokens } from "../../token";

<Meta title="Design-system/Theme/Tokens/ColorAlgorithm" />

# Color Algorithm

export const Background = () => {
  const [seedColor, setSeedColor] = useState(defaultTokens.seedColor)
  const [isDarkMode, setDarkMode] = useState(false);
  const { theme } = useTheme({seedColor, colorMode: isDarkMode ? "dark" : "light"});
  const { color } = theme;

return (
<ThemeProvider theme={theme}>
<Flex gap="spacing-6" marginTop="spacing-4" marginBottom="spacing-4">
<Flex direction="column" gap="spacing-2">
<Text>Accent Color</Text>
<ColorControl
id="accent-color"
name="accent-color"
label="Accent Color"
defaultValue={defaultTokens.seedColor}
value={seedColor}
onChange={(value)=> setSeedColor(value)}
/>
</Flex>
<Flex direction="column" gap="spacing-2">
<Text>Dark mode</Text>
<BooleanControl
name="colorScheme"
value={isDarkMode}
onChange={(checked) => setDarkMode(checked)}
/>
</Flex>
</Flex>

        <Flex padding="spacing-6" style={{background: "var(--color-bg)"}} direction="column">
          <TokenTable prefix="color" tokens={color}>
            {(cssVar) => (
              <StyledSquarePreview
                style={{
                  background: cssVar,
                }}
              />
            )}
          </TokenTable>
        </Flex>
      </ThemeProvider>

);
};

<Background />
