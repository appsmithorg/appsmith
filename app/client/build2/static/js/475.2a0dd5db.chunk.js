"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[475],{75640:function(e,n,t){var i,r=t(17186),a=(t(72791),t(79271)),o=t(86538),s=t(16054),d=t(72310),l=t(75076),c=t(9724),u=t(17823),p=t(86957),h=t(7526),f=t(52628),g=t(35581),m=t(40641),x=t(80184),A=o.ZP.div(i||(i=(0,r.Z)(["\n  //width: 100%;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding-left: 16px;\n  width: fit-content;\n  /* background-color: ","; */\n"])),(function(e){return e.theme.colors.apiPane.iconHoverBg}));n.Z=function(){var e=(0,a.k6)(),n=location.search,t=new URLSearchParams(n).get("from"),i=(0,f.v9)(g.zj),r=(0,p.c)(),o=c.Rb.ACTIVE;return r&&(o=c.Rb.NEW),(0,x.jsxs)(A,{className:"t--close-editor",onClick:function(n){l.Z.startTracking(l.W.CLOSE_SIDE_PANE,{path:location.pathname}),n.stopPropagation();var a=r?(0,h.Id)({pageId:i}):(0,h.K3)({pageId:i}),s="datasources"===t?(0,h.RQ)({pageId:i,selectedTab:o,params:(0,u.vl)()}):a;m.Z.logEvent("BACK_BUTTON_CLICK",{type:"BACK_BUTTON",fromUrl:location.pathname,toUrl:s}),e.push(s)},children:[(0,x.jsx)(d.JO,{icon:"chevron-left",iconSize:16}),(0,x.jsx)(s.xv,{style:{color:"#0c0000",lineHeight:"14px"},type:s.yG.P1,children:"Back"})]})}},9317:function(e,n,t){t.d(n,{lK:function(){return a}});var i,r,a,o=t(50678),s=t(17186),d=t(72791),l=t(37305),c=t(72310),u=t(86538),p=t(763),h=t.n(p),f=t(40598),g=t(16054),m=t(80184);!function(e){e[e.SINGLE=0]="SINGLE",e[e.DOUBLE=1]="DOUBLE"}(a||(a={}));var x=u.ZP.div(i||(i=(0,s.Z)(["\n  && {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: flex-start;\n    width: 100%;\n    & ."," {\n      background: ",";\n      cursor: pointer;\n      padding: ",";\n      text-transform: none;\n      flex: 1 0 100%;\n      max-width: 100%;\n      overflow: hidden;\n      display: flex;\n      &:before,\n      &:after {\n        display: none;\n      }\n    }\n    & div."," {\n      text-transform: none;\n      width: 100%;\n    }\n  }\n"])),l.ZA5,(function(e){return e.isEditing&&!e.minimal?e.theme.colors.editableText.bg:"none"}),(function(e){return e.minimal?"0px":"5px 5px"}),l.Wi$),A=u.ZP.div(r||(r=(0,s.Z)(["\n  display: flex;\n  &&&& ."," {\n    & ."," {\n      &:hover {\n        text-decoration: ",";\n      }\n    }\n  }\n  &&& .",":hover {\n    ","\n  }\n  & span.bp3-editable-text-content {\n    height: auto !important;\n  }\n"])),l.ZA5,l.qNT,(function(e){return e.minimal?"underline":"none"}),l.qNT,(function(e){return e.underline?"\n        border-bottom-style: solid;\n        border-bottom-width: 1px;\n        width: fit-content;\n      ":null}));n.ZP=function(e){var n=e.beforeUnmount,t=e.className,i=e.defaultValue,r=e.editInteractionKind,s=e.errorTooltipClass,l=e.forceDefault,u=e.hideEditIcon,p=e.isEditingDefault,v=e.isInvalid,C=e.maxLength,y=e.minimal,T=e.onBlur,I=e.onTextChanged,b=e.placeholder,Z=e.updating,E=e.valueTransform,S=(0,d.useState)(!!p),j=(0,o.Z)(S,2),D=j[0],P=j[1],w=(0,d.useState)(i),k=(0,o.Z)(w,2),R=k[0],O=k[1],N=(0,d.useRef)(""),F=(0,d.useCallback)((function(e){N.current=e,O(e)}),[]);(0,d.useEffect)((function(){F(i)}),[i]),(0,d.useEffect)((function(){P(!!p)}),[i,p]),(0,d.useEffect)((function(){!0===l&&F(i)}),[l,i]),(0,d.useEffect)((function(){return function(){"function"===typeof n&&n(N.current)}}),[n]);var U=function(e){P(!0),e.preventDefault(),e.stopPropagation()},z=(0,d.useCallback)((function(e){T&&T(),!!v&&v(e)?g.x7.show({text:"Invalid name",variant:g.$e.danger}):(I(e),P(!1))}),[v,I]),V=(0,d.useCallback)((function(e){var n=e;E&&(n=E(e)),F(n)}),[E]),H=v&&v(R),_=H||void 0;return(0,m.jsx)(x,{isEditing:D,minimal:!!y,onClick:r===a.SINGLE?U:h().noop,onDoubleClick:r===a.DOUBLE?U:h().noop,children:(0,m.jsx)(f.Z,{customClass:s,isOpen:!!_,message:H,children:(0,m.jsxs)(A,{isValid:!_,minimal:!!y,underline:e.underline,children:[(0,m.jsx)(c.sL,{className:t,disabled:!D,isEditing:D,maxLength:C,onCancel:T,onChange:V,onConfirm:z,placeholder:b,selectAllOnFocus:!0,value:R}),!y&&!u&&!Z&&!D&&(0,m.jsx)(g.JO,{className:"t--action-name-edit-icon",fillColor:"#939090",name:"edit",size:g.Jh.XXL})]})})})}},49764:function(e,n,t){var i,r,a,o;t.d(n,{Gr:function(){return i},b4:function(){return a},qJ:function(){return o},vx:function(){return r}}),function(e){e.NONE="dbAuth",e.OAuth2="oAuth2",e.basic="basic",e.apiKey="apiKey",e.bearerToken="bearerToken"}(i||(i={})),function(e){e.DEFAULT="DEFAULT",e.SELF_SIGNED_CERTIFICATE="SELF_SIGNED_CERTIFICATE"}(r||(r={})),function(e){e.QueryParams="queryParams",e.Header="header"}(a||(a={})),function(e){e.ClientCredentials="client_credentials",e.AuthorizationCode="authorization_code"}(o||(o={}))},91142:function(e,n,t){var i,r,a,o=t(27853),s=t(84531),d=t(81020),l=t(18334),c=t(17186),u=t(72791),p=t(72310),h=t(86538),f=t(16054),g=t(80184),m=h.ZP.div(i||(i=(0,c.Z)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  letter-spacing: -0.17px;\n  color: #4e5d78;\n  display: flex;\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[2]})),x=h.ZP.div(r||(r=(0,c.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 240px;\n  cursor: pointer;\n  margin-bottom: 5;\n"]))),A=h.ZP.div(a||(a=(0,c.Z)(["\n  height: 2px;\n  background-color: #d0d7dd;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]))),v=function(e){(0,d.Z)(t,e);var n=(0,l.Z)(t);function t(e){var i;return(0,o.Z)(this,t),(i=n.call(this,e)).state={isOpen:e.defaultIsOpen||!1},i}return(0,s.Z)(t,[{key:"render",value:function(){var e=this,n=this.props,t=n.children,i=n.headerIcon,r=n.title,a=this.state.isOpen;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A,{className:"t--collapse-top-border"}),(0,g.jsxs)(x,{className:"t--collapse-section-container","data-cy":"section-".concat(r),"data-replay-id":"section-".concat(r),onClick:function(){return e.setState({isOpen:!e.state.isOpen})},children:[(0,g.jsxs)(m,{children:[r,i&&(0,g.jsx)(f.JO,{fillColor:i.color,name:i.name,size:f.Jh.MEDIUM})]}),(0,g.jsx)(p.JO,{icon:a?"chevron-up":"chevron-down",iconSize:16,style:{color:"#2E3D49"}})]}),(0,g.jsx)(p.UO,{isOpen:this.state.isOpen,keepChildrenMounted:!0,children:t})]})}}]),t}(u.Component);n.Z=v},27966:function(e,n,t){var i,r,a,o=t(17186),s=(t(72791),t(52628)),d=t(79271),l=t(763),c=t(23861),u=t(60309),p=t(18202),h=t(86538),f=t(48016),g=t(99983),m=t(80184),x=h.ZP.div(i||(i=(0,o.Z)(["\n  color: ",";\n  font-size: 17px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n"])),u.w.OXFORD_BLUE),A=h.ZP.div(r||(r=(0,o.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),v=h.ZP.div(a||(a=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  border-top: 1px solid #d0d7dd;\n  border-bottom: 1px solid #d0d7dd;\n  padding-top: 24px;\n  padding-bottom: 24px;\n  margin-top: 18px;\n"])));n.Z=function(){var e,n=(0,d.UO)(),t=(0,s.v9)((function(e){return(0,c.qO)(e,n.datasourceId)})),i=(0,s.v9)((function(e){return e.entities.plugins.formConfigs})),r=(0,s.v9)((function(e){var n;return(0,c.s3)(e,null!==(n=null===t||void 0===t?void 0:t.pluginId)&&void 0!==n?n:"")})),a=i[null!==(e=null===t||void 0===t?void 0:t.pluginId)&&void 0!==e?e:""];return(0,m.jsxs)(v,{children:[(0,m.jsxs)(A,{children:[(0,m.jsxs)(x,{children:[(0,m.jsx)(p.b.SAVE_SUCCESS,{color:u.w.GREEN,height:30,width:30}),(0,m.jsx)("div",{style:{marginLeft:"12px"},children:"Datasource Saved"})]}),(0,m.jsx)(g.Z,{datasource:t,eventFrom:"datasource-pane",plugin:r})]}),(0,m.jsx)("div",{style:{marginTop:"30px"},children:(0,l.isNil)(a)||(0,l.isNil)(t)?void 0:(0,f.B)(a[0],t)})]})}},48016:function(e,n,t){t.d(n,{B:function(){return C}});var i,r,a,o,s=t(17186),d=t(72791),l=t(763),c=t(60309),u=t(86538),p=t(23074),h=t(62895),f=t.n(h),g=t(80184),m=u.ZP.div(i||(i=(0,s.Z)(["\n  color: ",";\n  font-size: 14px;\n  display: inline-block;\n"])),c.w.DOVE_GRAY),x=u.ZP.div(r||(r=(0,s.Z)(["\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-block;\n  margin-left: 5px;\n"]))),A=u.ZP.div(a||(a=(0,s.Z)(["\n  display: inline-block;\n  margin-left: 10px;\n"]))),v=u.ZP.div(o||(o=(0,s.Z)(["\n  &:not(first-child) {\n    margin-top: 9px;\n  }\n"]))),C=function e(n,t){return(0,g.jsx)(d.Fragment,{children:(0,l.map)(n.children,(function(n){if((0,p.xj)(t,n.hidden))return null;if("children"in n)return e(n,t);try{var i=n.configProperty,r=n.controlType,a=n.label,o=t.id+"_"+a,s=(0,l.get)(t,i);if(!s||(0,l.isArray)(s)&&s.length<1)return;if("KEYVALUE_ARRAY"===r){var d=i.split("[*]."),c=(0,l.get)(t,d[0],null);if(c&&!(0,l.isEmpty)(c)){var u=c[0];s=u[d[1]]}else s=""}if("FIXED_KEY_INPUT"===r)return(0,g.jsxs)(v,{children:[(0,g.jsxs)(m,{children:[i.key,": "]})," ",(0,g.jsx)(x,{children:i.value})]},o);if("KEY_VAL_INPUT"===r)return(0,g.jsxs)(v,{children:[(0,g.jsx)(m,{children:a}),s&&s.map((function(e){return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{style:{display:"inline-block"},children:[(0,g.jsx)(m,{children:"Key: "}),(0,g.jsx)(x,{children:e.key})]}),(0,g.jsxs)(A,{children:[(0,g.jsx)(m,{children:"Value: "}),(0,g.jsx)(x,{children:e.value})]})]},e.key)}))]},o);if("DROP_DOWN"===r&&Array.isArray(n.options)){var h=n.options.find((function(e){return e.value===s}));h&&h.label&&(s=h.label)}return(0,g.jsxs)(v,{children:[(0,g.jsxs)(m,{children:[a,": "]})," ",(0,g.jsx)(x,{children:s})]},o)}catch(C){f().error(C)}}))},t.id)}},72462:function(e,n,t){var i,r=t(18489),a=t(50678),o=t(17186),s=t(86538),d=t(72791),l=t(79271),c=t(9317),u=t(23861),p=t(52628),h=t(72014),f=t(40200),g=t(72310),m=t(80184),x=s.ZP.div(i||(i=(0,o.Z)(["\n  margin-left: 10px;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 24px;\n  display: flex;\n"])));n.Z=function(e){var n=(0,l.UO)(),t=(0,p.v9)((function(e){return(0,u.qO)(e,n.datasourceId)})),i=(0,p.v9)(u.ft),o=(0,d.useState)(!1),s=(0,a.Z)(o,2),A=s[0],v=s[1],C=(0,p.I0)(),y=(0,p.v9)((function(e){var n=t?t.id:"";return{isSaving:e.ui.datasourceName.isSaving[n],error:e.ui.datasourceName.errors[n]}})),T=d.useCallback((function(e){var n={};return i.filter((function(e){return e.id!==(null===t||void 0===t?void 0:t.id)})).map((function(e){n[e.name]=e})),!(0,h.Pz)(e,(0,r.Z)({},n))}),[i,t]),I=d.useCallback((function(e){return e&&0!==e.trim().length?!!T(e)&&"".concat(e," is already being used or is a restricted keyword."):"Please enter a valid name"}),[T]),b=(0,d.useCallback)((function(e){var n;!I(e)&&t&&t.name!==e&&C((0,f.CT)({id:null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:"",name:e}))}),[C,I,t]);return(0,d.useEffect)((function(){!1===y.isSaving&&!0===y.error?v(!0):!0===y.isSaving&&v(!1)}),[y.isSaving,y.error]),(0,m.jsxs)(x,{children:[(0,m.jsx)(c.ZP,{className:"t--edit-datasource-name",defaultValue:t?t.name:"",editInteractionKind:c.lK.SINGLE,forceDefault:A,isEditingDefault:e.focusOnMount,isInvalid:I,maxLength:30,onTextChanged:b,placeholder:"Datasource Name",type:"text",underline:!0,updating:y.isSaving}),y.isSaving&&(0,m.jsx)(g.$j,{size:16})]})}},93512:function(e,n,t){t.d(n,{Kk:function(){return R},ZM:function(){return k},cm:function(){return D},h4:function(){return w},nm:function(){return N},vU:function(){return P}});var i,r,a,o,s,d,l,c=t(27853),u=t(84531),p=t(81020),h=t(18334),f=t(17186),g=t(72791),m=t(86538),x=t(763),A=t.n(x),v=t(39270),C=t(91142),y=t(23074),T=t(62895),I=t.n(T),b=t(2131),Z=t(75640),E=t(43617),S=t(29688),j=t(80184),D=((0,m.ZP)(b.Z)(i||(i=(0,f.Z)(["\n  height: 50%;\n"]))),m.ZP.img(r||(r=(0,f.Z)(["\n  height: 40px;\n  width: auto;\n"])))),P=m.ZP.div(a||(a=(0,f.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n"]))),w=m.ZP.div(o||(o=(0,f.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  //margin-top: 16px;\n"]))),k=m.ZP.div(s||(s=(0,f.Z)(["\n  margin-top: 24px;\n  display: flex;\n  justify-content: flex-end;\n"]))),R=(0,m.ZP)(S.Y)(d||(d=(0,f.Z)(["\n  &&& {\n    width: auto;\n    min-width: 74px;\n    margin-right: 9px;\n    min-height: 32px;\n\n    & > span {\n      max-width: 100%;\n    }\n  }\n"]))),O=m.ZP.div(l||(l=(0,f.Z)(["\n  flex: 1;\n  padding: 20px;\n  margin-right: 0px;\n  overflow: auto;\n  .backBtn {\n    padding-bottom: 1px;\n    cursor: pointer;\n  }\n  .backBtnText {\n    font-size: 16px;\n    font-weight: 500;\n    cursor: pointer;\n  }\n"]))),N=function(e){(0,p.Z)(t,e);var n=(0,h.Z)(t);function t(){var e;(0,c.Z)(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).requiredFields={},e.configDetails={},e.validate=function(){var n={},t=Object.keys(e.requiredFields),i=e.props.formData;return t.forEach((function(t){var r=e.requiredFields[t];if("KEYVALUE_ARRAY"===r.controlType){var a=r.configProperty.split("[*]."),o=A().get(i,a[0],[]),s=[];o.forEach((function(e,n){var t=Object.keys(e),i={};e[t[0]]||(i[t[0]]="This field is required",s[n]=i),e[t[1]]||(i[t[1]]="This field is required",s[n]=i)})),s.length&&A().set(n,a[0],s)}else if("KEY_VAL_INPUT"===r.controlType){var d=A().get(i,t,[]);if(d.length)Object.values(d[0]).every((function(e){return e}))||A().set(n,t,"This field is required")}else{var l=A().get(i,t);A().isNil(l)&&A().set(n,t,"This field is required")}})),!A().isEmpty(n)},e.normalizeValues=function(){for(var n=e.props.formData,t={},i=0,r=Object.keys(e.configDetails);i<r.length;i++){var a=r[i],o=e.configDetails[a];if("KEYVALUE_ARRAY"===o){if("continue"===function(){var e=a.split("[*].");if(t[e[0]])return"continue";t[e[0]]=1;var i=A().get(n,e[0],[]),r=[];i.forEach((function(e){Object.values(e).every((function(e){return""===e}))||r.push(e)})),n=r.length?A().set(n,e[0],r):A().set(n,e[0],[])}())continue}else if("KEY_VAL_INPUT"===o){if("continue"===function(){if(t[a])return"continue";var e=A().get(n,a),i=[];e.forEach((function(e){Object.values(e).every((function(e){return""===e}))||i.push(e)})),n=i.length?A().set(n,a,i):A().set(n,a,[])}())continue}}return n},e.getTrimmedData=function(n){var t=(0,E.oL)(n),i=function(e){return e===E.Yk.ARRAY||e===E.Yk.OBJECT};return i(t)&&Object.keys(n).map((function(t){var r=(0,E.oL)(n[t]);i(r)?e.getTrimmedData(n[t]):r===E.Yk.STRING&&(n[t]=n[t].trim())})),n},e.renderForm=function(e){return(0,j.jsxs)("div",{className:"t--json-to-form-wrapper",style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,j.jsx)(Z.Z,{}),(0,j.jsx)(O,{children:e})]})},e.renderMainSection=function(n,t){return(0,y.xj)(e.props.formData,n.hidden)?null:(0,j.jsx)(C.Z,{defaultIsOpen:0===t,title:n.sectionName,children:e.renderEachConfig(n)},t)},e.renderSingleConfig=function(n,t){t=t||[];try{return e.setupConfig(n),(0,j.jsx)("div",{style:{marginTop:"16px"},children:(0,j.jsx)(v.Z,{config:n,formName:e.props.formName,multipleConfig:t})},n.configProperty)}catch(i){I().error(i)}},e.setupConfig=function(n){var t=n.configProperty,i=n.controlType,r=n.isRequired;e.configDetails[t]=i,r&&(e.requiredFields[t]=n)},e.isKVArray=function(e){return!(!Array.isArray(e)||e.length<2)&&(e[0].controlType&&"KEYVALUE_ARRAY"===e[0].controlType)},e.renderKVArray=function(n){try{return n.forEach((function(n){return e.setupConfig(n)})),e.renderSingleConfig(n[n.length-1],n)}catch(t){I().error(t)}},e.renderEachConfig=function(n){return(0,j.jsx)("div",{children:A().map(n.children,(function(t){if((0,y.xj)(e.props.formData,n.hidden))return null;if("children"in t){var i=t.children;return e.isKVArray(i)?e.renderKVArray(i):e.renderEachConfig(t)}return e.renderSingleConfig(t)}))},n.sectionName)},e}return(0,u.Z)(t,[{key:"componentDidMount",value:function(){this.requiredFields={},this.configDetails={}}},{key:"componentDidUpdate",value:function(e){e.datasourceId!==this.props.datasourceId&&(this.requiredFields={},this.configDetails={})}}]),t}(g.Component)},99983:function(e,n,t){var i,r=t(50678),a=t(17186),o=t(72791),s=t(33562),d=t(86538),l=t(16054),c=t(46898),u=t(9958),p=t(52628),h=t(35581),f=t(80184),g=(0,d.ZP)(l.zx)(i||(i=(0,a.Z)(["\n  padding: 10px 10px;\n  font-size: 12px;\n  &&&& {\n    height: 36px;\n    width: 136px;\n  }\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n  ."," {\n    svg {\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),l.PZ.ICON);n.Z=function(e){var n=e.datasource,t=e.plugin,i=null===t||void 0===t?void 0:t.type,a=(0,o.useState)(!1),d=(0,r.Z)(a,2),m=d[0],x=d[1],A=(0,p.I0)(),v=(0,p.v9)((function(e){return e.entities.actions})),C=(0,p.v9)(h.zj),y=(0,o.useCallback)((function(t){null===t||void 0===t||t.stopPropagation(),i!==s.zV.API||n&&n.datasourceConfiguration&&n.datasourceConfiguration.url?C&&(x(!0),n&&A((0,u.xL)(C,e.eventFrom,null===n||void 0===n?void 0:n.id))):l.x7.show({text:(0,c.G$W)(),variant:l.$e.danger})}),[A,v,C,n,i]);return(0,f.jsx)(g,{className:"t--create-query",icon:"plus",iconPosition:l.gg.left,isLoading:m||e.isLoading,onClick:y,text:i===s.zV.DB?"New Query":"New API"})}},34404:function(e,n,t){t.d(n,{Z:function(){return tn}});var i,r,a,o=t(18489),s=t(27853),d=t(84531),l=t(81020),c=t(18334),u=t(72791),p=t(52628),h=t(22871),f=t(763),g=t.n(f),m=t(23861),x=t(40200),A=t(31591),v=t(44474),C=t(53538),y=t(17186),T=t(86538),I=t(72310),b=t(72462),Z=t(16054),E=t(60309),S=t(13581),j=t(80184),D=(0,S.ZP)(I.JO)(i||(i=(0,y.Z)(["\n  margin-right: 14.5px;\n  margin-left: 4px;\n  height: 100%;\n  background-color: #ef7541;\n  border: 2px solid rgba(239, 123, 99);\n  border-radius: 50%;\n"]))),P=S.ZP.div(r||(r=(0,y.Z)(["\n  background-color: rgba(239, 123, 99, 0.15);\n  padding: 10px 10px;\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n\n  margin-top: 18px;\n  margin-bottom: 19px;\n  margin-left: 6px;\n  width: 89%;\n"]))),w=S.ZP.div(a||(a=(0,y.Z)(["\n  width: 2px;\n  background-color: #ef7541;\n  position: absolute;\n  left: 0;\n  height: 100%;\n"])));function k(e){return(0,j.jsxs)(P,{children:[(0,j.jsx)(w,{}),(0,j.jsx)(D,{color:"#FDEBE8",icon:"help"}),(0,j.jsx)("div",{children:e.children})]})}var R,O,N,F,U=t(27966),z=t(73931),V=t(73073),H=t(73947),_=t(40641),L=t(72014),G=t(33562),M=t(93512),B=t(77239),Y=(0,H.x)().cloudHosting,K=(0,T.ZP)(I.JO)(R||(R=(0,y.Z)(["\n  svg {\n    width: 12px;\n    height: 18px;\n  }\n"]))),q=T.ZP.div(O||(O=(0,y.Z)(["\n  width: max-content;\n"]))),X=(0,T.ZP)(Z.zx)(N||(N=(0,y.Z)(["\n  padding: 10px 20px;\n  &&&& {\n    height: 32px;\n    max-width: 160px;\n    border: 1px solid ",";\n    width: auto;\n  }\n"])),E.w.HIT_GRAY),J=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,s.Z)(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).getSanitizedData=function(){return e.getTrimmedData(e.normalizeValues())},e.openOmnibarReadMore=function(){(0,e.props.openOmnibarReadMore)("connect to databases"),_.Z.logEvent("OPEN_OMNIBAR",{source:"READ_MORE_DATASOURCE"})},e.renderDataSourceConfigForm=function(n){var t=e.props,i=t.datasource,r=t.datasourceButtonConfiguration,a=t.formData,o=t.messages,s=t.pluginType,d=t.viewMode;return(0,j.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[!e.props.hiddenHeader&&(0,j.jsxs)(M.h4,{children:[(0,j.jsxs)(M.vU,{children:[(0,j.jsx)(M.cm,{alt:"Datasource",src:e.props.pluginImage}),(0,j.jsx)(b.Z,{focusOnMount:e.props.isNewDatasource})]}),d&&(0,j.jsx)(X,{category:Z.WD.tertiary,className:"t--edit-datasource",onClick:function(){e.props.setDatasourceEditorMode(e.props.datasourceId,!1)},text:"EDIT"})]}),o&&o.map((function(e,n){return(0,j.jsx)(Z.UW,{addMarginTop:!0,fill:!0,text:e,variant:Z.$e.warning},n)})),!e.props.hiddenHeader&&Y&&s===G.zV.DB&&!d&&(0,j.jsx)(q,{children:(0,j.jsxs)(k,{children:[(0,j.jsx)("span",{children:"Whitelist the IP ".concat((0,L.zO)(V.Sh),"  on your database instance to connect to it. ")}),(0,j.jsxs)("a",{onClick:e.openOmnibarReadMore,children:["Read more ",(0,j.jsx)(K,{icon:"document-open"})]})]})}),d?(0,j.jsx)(U.Z,{}):(0,j.jsxs)(j.Fragment,{children:[g().isNil(n)?void 0:g().map(n,e.renderMainSection),""]}),i&&(0,j.jsx)(B.ZP,{datasource:i,datasourceButtonConfiguration:r,formData:a,getSanitizedFormData:g().memoize(e.getSanitizedData),isInvalid:e.validate(),shouldRender:!d})]})},e}return(0,d.Z)(t,[{key:"componentDidUpdate",value:function(e){e.datasourceId!==this.props.datasourceId&&((0,v.Z)((0,C.Z)(t.prototype),"componentDidUpdate",this).call(this,e),this.props.hiddenHeader||this.props.setDatasourceEditorMode(this.props.datasourceId,!0))}},{key:"render",value:function(){var e=this.props,n=e.formConfig,t=e.viewMode;if(!this.props.initialized&&!t)return null;var i=this.renderDataSourceConfigForm(n);return this.renderForm(i)}}]),t}(M.nm),W=(0,p.$j)((function(e,n){var t,i=e.entities.datasources.list.find((function(e){return e.id===n.datasourceId}));return{messages:i&&i.messages,datasource:i,datasourceButtonConfiguration:(0,m.Ds)(e,null===n||void 0===n||null===(t=n.formData)||void 0===t?void 0:t.pluginId),isReconnectingModalOpen:e.entities.datasources.isReconnectingModalOpen}}))((0,z.Z)({form:A._8,enableReinitialize:!0})(J)),Q=t(98132),$=t(8236),ee=t(81619),ne=t(39270),te=t(72060),ie=t(2131),re=t(39944),ae=t(71520),oe=t(49764),se=function(e){var n,t,i,r=g().get(e,"datasourceConfiguration.authentication.authenticationType",oe.Gr.NONE),a=g().get(e,"datasourceConfiguration.connection",{ssl:{authType:oe.vx.DEFAULT}}),o=le(r,e),s="Y"===g().get(e,"datasourceConfiguration.properties[0].value","N"),d=s?g().get(e,"datasourceConfiguration.properties[1].value"):"";return{datasourceId:e.id,workspaceId:e.workspaceId,pluginId:e.pluginId,isValid:e.isValid,url:null===(n=e.datasourceConfiguration)||void 0===n?void 0:n.url,headers:pe(null===(t=e.datasourceConfiguration)||void 0===t?void 0:t.headers),queryParameters:pe(null===(i=e.datasourceConfiguration)||void 0===i?void 0:i.queryParameters),isSendSessionEnabled:s,sessionSignatureKey:d,authType:r,authentication:o,connection:a}},de=function(e,n){if(e===oe.Gr.NONE||!n)return null;if(ce(e,n)||ue(e,n)){var t={authenticationType:oe.Gr.OAuth2,accessTokenUrl:n.accessTokenUrl,clientId:n.clientId,headerPrefix:n.headerPrefix,scopeString:n.scopeString,clientSecret:n.clientSecret,isAuthorizationHeader:n.isAuthorizationHeader,isTokenHeader:n.isTokenHeader,audience:n.audience,resource:n.resource,sendScopeWithRefreshToken:n.sendScopeWithRefreshToken,refreshTokenClientCredentialsLocation:n.refreshTokenClientCredentialsLocation,useSelfSignedCert:n.useSelfSignedCert};if(ce(e,n))return(0,o.Z)((0,o.Z)({},t),{},{grantType:oe.qJ.ClientCredentials,customTokenParameters:pe(n.customTokenParameters)});if(ue(e,n))return(0,o.Z)((0,o.Z)({},t),{},{grantType:oe.qJ.AuthorizationCode,authorizationUrl:n.authorizationUrl,isAuthorized:!!n.isAuthorized,customAuthenticationParameters:pe(n.customAuthenticationParameters)})}if(e===oe.Gr.basic&&"username"in n)return{authenticationType:oe.Gr.basic,username:n.username,password:n.password};if(e===oe.Gr.apiKey&&"label"in n)return{authenticationType:oe.Gr.apiKey,label:n.label,value:n.value,headerPrefix:n.headerPrefix,addTo:n.addTo};if(e===oe.Gr.bearerToken&&"bearerToken"in n)return{authenticationType:oe.Gr.bearerToken,bearerToken:n.bearerToken};return null},le=function(e,n){if(n&&n.datasourceConfiguration&&n.datasourceConfiguration.authentication){var t=n.datasourceConfiguration.authentication;if(ce(e,t)||ue(e,t)){var i={authenticationType:oe.Gr.OAuth2,accessTokenUrl:t.accessTokenUrl||"",clientId:t.clientId||"",headerPrefix:t.headerPrefix||"",scopeString:t.scopeString||"",clientSecret:t.clientSecret,isTokenHeader:!!t.isTokenHeader,isAuthorizationHeader:!!t.isAuthorizationHeader,audience:t.audience||"",resource:t.resource||"",sendScopeWithRefreshToken:t.sendScopeWithRefreshToken||"",refreshTokenClientCredentialsLocation:t.refreshTokenClientCredentialsLocation||"BODY"};if(ce(e,t))return(0,o.Z)((0,o.Z)({},i),{},{grantType:oe.qJ.ClientCredentials,customTokenParameters:pe(t.customTokenParameters)});if(ue(e,t))return(0,o.Z)((0,o.Z)({},i),{},{grantType:oe.qJ.AuthorizationCode,authorizationUrl:t.authorizationUrl||"",customAuthenticationParameters:pe(t.customAuthenticationParameters),isAuthorized:!!t.isAuthorized,isAuthorizationHeader:"undefined"===typeof t.isAuthorizationHeader||!!t.isAuthorizationHeader})}if(e===oe.Gr.basic)return{authenticationType:oe.Gr.basic,username:t.username||"",password:t.password||""};if(e===oe.Gr.apiKey)return{authenticationType:oe.Gr.apiKey,label:t.label||"",value:t.value||"",headerPrefix:t.headerPrefix||"",addTo:t.addTo||""};if(e===oe.Gr.bearerToken)return{authenticationType:oe.Gr.bearerToken,bearerToken:t.bearerToken||""}}},ce=function(e,n){return e===oe.Gr.OAuth2&&(!n||g().get(n,"grantType")===oe.qJ.ClientCredentials)},ue=function(e,n){return e===oe.Gr.OAuth2&&g().get(n,"grantType")===oe.qJ.AuthorizationCode},pe=function(e){if(!Array.isArray(e))return[];var n=[];return e.forEach((function(e){Object.values(e).every((function(e){return""===e}))||n.push(e)})),n},he=t(46898),fe=t(91142),ge=t(303),me=t(50678),xe=t(76998),Ae=t.n(xe),ve=t(18613),Ce=t(29688),ye=T.ZP.div(F||(F=(0,y.Z)(["\n  display: flex;\n\n  div {\n    flex-basis: calc(100% - 90px);\n  }\n  input:disabled {\n    color: #555;\n  }\n  button {\n    flex-basis: 80px;\n    margin-left: 10px;\n  }\n"])));var Te,Ie,be,Ze,Ee,Se,je,De,Pe,we,ke=function(e){var n=e.copyText,t=(0,u.createRef)(),i=(0,u.useState)(!1),r=(0,me.Z)(i,2),a=r[0],o=r[1];return(0,j.jsxs)(ye,{children:[(0,j.jsx)(ve.JK,{defaultValue:n,disabled:!0,fill:!0,onChange:function(){t.current&&t.current.setSelectionRange(0,n.length)}}),(0,j.jsx)(Ce.Y,{onClick:function(){var e;e=n,Ae()(e),o(!0),setTimeout((function(){o(!1)}),3e3)},text:a?"Copied":"Copy"})]})},Re=t(75640),Oe=t(17909),Ne=t(61386),Fe=t(28446),Ue=T.ZP.div(Te||(Te=(0,y.Z)(["\n  flex: 1;\n  padding: 20px;\n  margin-left: 10px;\n  margin-right: 0px;\n  overflow: auto;\n  .backBtn {\n    padding-bottom: 1px;\n    cursor: pointer;\n  }\n  .backBtnText {\n    font-size: 16px;\n    font-weight: 500;\n    cursor: pointer;\n  }\n"]))),ze=T.ZP.div(Ie||(Ie=(0,y.Z)(["\n  margin-top: 16px;\n"]))),Ve=((0,T.ZP)(ie.Z)(be||(be=(0,y.Z)(["\n  height: 50%;\n"]))),T.ZP.img(Ze||(Ze=(0,y.Z)(["\n  height: 40px;\n  width: auto;\n"])))),He=T.ZP.div(Ee||(Ee=(0,y.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n"]))),_e=T.ZP.div(Se||(Se=(0,y.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Le=T.ZP.div(je||(je=(0,y.Z)(["\n  margin-top: 24px;\n  display: flex;\n  justify-content: flex-end;\n"]))),Ge=(0,T.ZP)(Ce.Y)(De||(De=(0,y.Z)(["\n  &&& {\n    width: auto;\n    min-width: 74px;\n    margin-right: 9px;\n    min-height: 32px;\n\n    & > span {\n      max-width: 100%;\n    }\n  }\n"]))),Me=(0,T.ZP)($.Z)(Pe||(Pe=(0,y.Z)(["\n  &&&& {\n    width: 87px;\n    height: 32px;\n  }\n"]))),Be=(0,T.ZP)(Me)(we||(we=(0,y.Z)(["\n  &&&& {\n    width: 180px;\n  }\n"]))),Ye=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,s.Z)(this,t),(i=n.call(this,e)).ensureAPIKeyDefaultsAreCorrect=function(){if(i.props.formData){var e=i.props.formData.authentication;e&&g().get(e,"addTo")||i.props.change("authentication.addTo",oe.b4.Header),e&&g().get(e,"headerPrefix")||i.props.change("authentication.headerPefix","ApiKeyAuthType.Header")}},i.ensureOAuthDefaultsAreCorrect=function(){if(i.props.formData){var e=i.props.formData.authentication;e&&g().get(e,"grantType")||i.props.change("authentication.grantType",oe.qJ.ClientCredentials),void 0===g().get(e,"isTokenHeader")&&i.props.change("authentication.isTokenHeader",!0),i.isDirty("authentication.headerPrefix")||void 0!==g().get(e,"headerPrefix")||i.props.change("authentication.headerPrefix","Bearer"),g().get(e,"grantType")===oe.qJ.AuthorizationCode&&void 0===g().get(e,"isAuthorizationHeader")&&i.props.change("authentication.isAuthorizationHeader",!0),g().get(e,"grantType")===oe.qJ.ClientCredentials&&void 0===g().get(e,"isAuthorizationHeader")&&i.props.change("authentication.isAuthorizationHeader",!1),g().get(e,"grantType")===oe.qJ.AuthorizationCode&&(void 0!==g().get(e,"sendScopeWithRefreshToken")&&""!==g().get(e,"sendScopeWithRefreshToken")||i.props.change("authentication.sendScopeWithRefreshToken",!1)),g().get(e,"grantType")===oe.qJ.AuthorizationCode&&(void 0!==g().get(e,"refreshTokenClientCredentialsLocation")&&""!==g().get(e,"refreshTokenClientCredentialsLocation")||i.props.change("authentication.refreshTokenClientCredentialsLocation","BODY"))}},i.disableSave=function(){var e=i.props.formData;return!e||!e.url},i.save=function(e){var n=function(e,n){var t=de(n.authType,n.authentication);return(0,o.Z)((0,o.Z)({},e),{},{datasourceConfiguration:{url:n.url,headers:pe(n.headers),queryParameters:pe(n.queryParameters),properties:[{key:"isSendSessionEnabled",value:n.isSendSessionEnabled?"Y":"N"},{key:"sessionSignatureKey",value:n.sessionSignatureKey}],authentication:t,connection:n.connection}})}(i.props.datasource,i.props.formData);_.Z.logEvent("SAVE_DATA_SOURCE_CLICK",{pageId:i.props.pageId,appId:i.props.applicationId}),i.props.updateDatasource(n,e)},i.createApiAction=function(){var e,n,t,r,a,s,d=i.props,l=d.actions,c=d.datasource,u=d.pageId;if(c&&c.datasourceConfiguration&&c.datasourceConfiguration.url){var p=(0,Q.U$)(l,u||""),h=null!==(e=null===(n=i.props.datasource)||void 0===n||null===(t=n.datasourceConfiguration)||void 0===t?void 0:t.headers)&&void 0!==e?e:[],f=null!==(r=null===(a=i.props.datasource)||void 0===a||null===(s=a.datasourceConfiguration)||void 0===s?void 0:s.queryParameters)&&void 0!==r?r:[],g=(0,o.Z)((0,o.Z)({},re.q),{},{headers:h.length?h:re.q.headers,queryParameters:f.length?f:re.q.queryParameters});i.save((0,ae.B8)({name:p,pageId:u,pluginId:c.pluginId,datasource:{id:c.id},eventData:{actionType:"API",from:"datasource-pane"},actionConfiguration:g}))}else Z.x7.show({text:"Unable to create API. Try adding a url to the datasource",variant:Z.$e.danger})},i.urlValidator=function(e){return e?new RegExp("^(http|https)://").test(e)?{isValid:!0,message:""}:{isValid:!1,message:(0,he.tnH)(he.uuD)}:{isValid:!0,message:""}},i.render=function(){return(0,j.jsxs)(j.Fragment,{children:[!i.props.hiddenHeader&&(0,j.jsx)(Re.Z,{}),(0,j.jsx)(Ue,{children:(0,j.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[i.renderHeader(),i.renderEditor(),i.renderSave()]})})]})},i.renderHeader=function(){var e=i.props,n=e.hiddenHeader,t=e.isNewDatasource,r=e.pluginImage;return n?null:(0,j.jsx)(_e,{children:(0,j.jsxs)(He,{children:[(0,j.jsx)(Ve,{alt:"Datasource",src:r}),(0,j.jsx)(b.Z,{focusOnMount:t})]})})},i.renderSave=function(){var e=i.props,n=e.datasourceId,t=e.deleteDatasource,r=e.hiddenHeader,a=e.isDeleting,o=e.isSaving;return(0,j.jsxs)(Le,{children:[!r&&(0,j.jsx)(Ge,{buttonStyle:"DANGER",buttonVariant:Oe.lm.PRIMARY,className:"t--delete-datasource",loading:a,onClick:function(){i.state.confirmDelete?t(n):i.setState({confirmDelete:!0})},text:i.state.confirmDelete?(0,he.tnH)(he.fUd):(0,he.tnH)(he.mcU)}),(0,j.jsx)(Me,{className:"t--save-datasource",disabled:i.disableSave(),filled:!0,intent:"primary",loading:o,onClick:function(){return i.save()},size:"small",text:"Save"})]})},i.renderEditor=function(){var e=i.props,n=e.datasource,t=e.datasourceId,r=e.formData,a=e.isSaving,o=e.messages,s=e.pageId,d=g().get(n,"datasourceConfiguration.authentication.isAuthorized",!1);if(r){var l=r.authentication;return(0,j.jsxs)(j.Fragment,{children:[o&&o.map((function(e,n){return(0,j.jsx)(Z.UW,{fill:!0,text:e,variant:Z.$e.warning},n)})),(0,j.jsx)(ze,{"data-replay-id":btoa("url"),children:i.renderInputTextControlViaFormControl("url","URL","https://example.com","TEXT",!1,!0,i.urlValidator)}),(0,j.jsx)(ze,{"data-replay-id":btoa("headers"),children:i.renderKeyValueControlViaFormControl("headers","Headers","",!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("queryParameters"),children:i.renderKeyValueControlViaFormControl("queryParameters","Query Parameters","",!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("isSendSessionEnabled"),children:i.renderDropdownControlViaFormControl("isSendSessionEnabled",[{label:"Yes",value:!0},{label:"No",value:!1}],"Send Appsmith signature header","",!0,"Header key: X-APPSMITH-SIGNATURE")}),r.isSendSessionEnabled&&(0,j.jsx)(ze,{"data-replay-id":btoa("sessionSignatureKey"),children:i.renderInputTextControlViaFormControl("sessionSignatureKey","Session Details Signature Key","","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authType"),children:i.renderDropdownControlViaFormControl("authType",[{label:"None",value:oe.Gr.NONE},{label:"Basic",value:oe.Gr.basic},{label:"OAuth 2.0",value:oe.Gr.OAuth2},{label:"API Key",value:oe.Gr.apiKey},{label:"Bearer Token",value:oe.Gr.bearerToken}],"Authentication Type","",!1,"")}),i.renderAuthFields(),(0,j.jsx)(fe.Z,{title:"Advanced Settings",children:i.renderOauth2AdvancedSettings()}),i.renderSelfSignedCertificateFields(),r.authType&&r.authType===oe.Gr.OAuth2&&g().get(l,"grantType")===oe.qJ.AuthorizationCode&&(0,j.jsx)(ze,{children:(0,j.jsx)(Be,{disabled:i.disableSave(),filled:!0,intent:"primary",loading:a,onClick:function(){return i.save((0,x.l8)(s,t,G.zV.API))},size:"small",text:d?"Save and Re-Authorize":"Save and Authorize"})})]})}},i.renderSelfSignedCertificateFields=function(){var e=i.props.formData.connection;if((null===e||void 0===e?void 0:e.ssl.authType)===oe.vx.SELF_SIGNED_CERTIFICATE)return(0,j.jsx)(fe.Z,{defaultIsOpen:!0,title:"Certificate Details",children:i.renderFilePickerControlViaFormControl("connection.ssl.certificateFile","Upload Certificate","",!1,!0)})},i.renderAuthFields=function(){var e,n=i.props.formData.authType;if(n===oe.Gr.OAuth2?e=i.renderOauth2():n===oe.Gr.basic?e=i.renderBasic():n===oe.Gr.apiKey?e=i.renderApiKey():n===oe.Gr.bearerToken&&(e=i.renderBearerToken()),e)return(0,j.jsx)(fe.Z,{defaultIsOpen:!0,title:"Authentication",children:e})},i.renderApiKey=function(){var e=i.props.formData.authentication;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.label"),children:i.renderInputTextControlViaFormControl("authentication.label","Key","api_key","TEXT",!1,!1)}),(0,j.jsx)(ze,{children:i.renderInputTextControlViaFormControl("authentication.value","Value","value","TEXT",!0,!1)}),(0,j.jsx)(ze,{children:i.renderDropdownControlViaFormControl("authentication.addTo",[{label:"Query Params",value:oe.b4.QueryParams},{label:"Header",value:oe.b4.Header}],"Add To","",!1,"")}),"header"==g().get(e,"addTo")&&(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.headerPrefix"),children:i.renderInputTextControlViaFormControl("authentication.headerPrefix","Header Prefix","eg: Bearer ","TEXT",!1,!1)})]})},i.renderBearerToken=function(){return(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.bearerToken"),children:i.renderInputTextControlViaFormControl("authentication.bearerToken","Bearer Token","Bearer Token","TEXT",!0,!1)})},i.renderBasic=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.username"),children:i.renderInputTextControlViaFormControl("authentication.username","Username","Username","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.password"),children:i.renderInputTextControlViaFormControl("authentication.password","Password","Password","PASSWORD",!0,!1)})]})},i.renderOauth2=function(){var e=i.props.formData.authentication;if(e){var n;switch(g().get(e,"grantType")){case oe.qJ.AuthorizationCode:n=i.renderOauth2AuthorizationCode();break;case oe.qJ.ClientCredentials:n=i.renderOauth2ClientCredentials()}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.grantType"),children:i.renderDropdownControlViaFormControl("authentication.grantType",[{label:"Client Credentials",value:oe.qJ.ClientCredentials},{label:"Authorization Code",value:oe.qJ.AuthorizationCode}],"Grant Type","",!1,"")}),n]})}},i.renderOauth2Common=function(){var e=i.props.formData;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.isTokenHeader"),children:i.renderDropdownControlViaFormControl("authentication.isTokenHeader",[{label:"Request Header",value:!0},{label:"Request URL",value:!1}],"Add Access Token To","",!1,"")}),g().get(e.authentication,"isTokenHeader")&&(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.headerPrefix"),children:i.renderInputTextControlViaFormControl("authentication.headerPrefix","Header Prefix","eg: Bearer ","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.accessTokenUrl"),children:i.renderInputTextControlViaFormControl("authentication.accessTokenUrl","Access Token URL","https://example.com/login/oauth/access_token","TEXT",!1,!1,i.urlValidator)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.clientId"),children:i.renderInputTextControlViaFormControl("authentication.clientId","Client ID","Client ID","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.clientSecret"),children:i.renderInputTextControlViaFormControl("authentication.clientSecret","Client Secret","Client Secret","PASSWORD",!0,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.scopeString"),children:i.renderInputTextControlViaFormControl("authentication.scopeString","Scope(s)","e.g. read, write","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.isAuthorizationHeader"),children:i.renderDropdownControlViaFormControl("authentication.isAuthorizationHeader",[{label:"Send as Basic Auth header",value:!0},{label:"Send client credentials in body",value:!1}],"Client Authentication","",!1,"")})]})},i.renderOauth2AdvancedSettings=function(){var e=i.props.formData,n=e.authentication,t=e.authType,r=e.connection,a=g().get(n,"grantType")===oe.qJ.AuthorizationCode,o=t===oe.Gr.OAuth2,s=g().get(r,"ssl.authType")===oe.vx.SELF_SIGNED_CERTIFICATE;return(0,j.jsxs)(j.Fragment,{children:[o&&a&&(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.sendScopeWithRefreshToken"),children:i.renderDropdownControlViaFormControl("authentication.sendScopeWithRefreshToken",[{label:"Yes",value:!0},{label:"No",value:!1}],"Send scope with refresh token","",!1,"")}),o&&a&&(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.refreshTokenClientCredentialsLocation"),children:i.renderDropdownControlViaFormControl("authentication.refreshTokenClientCredentialsLocation",[{label:"Body",value:"BODY"},{label:"Header",value:"HEADER"}],"Send client credentials with (on refresh token):","",!1,"")}),(0,j.jsx)(ze,{"data-replay-id":btoa("ssl"),children:i.renderDropdownControlViaFormControl("connection.ssl.authType",[{label:"No",value:"DEFAULT"},{label:"Yes",value:"SELF_SIGNED_CERTIFICATE"}],"Use Self-signed certificate","",!0,"","DEFAULT")}),o&&s&&(0,j.jsx)(ze,{"data-replay-id":btoa("selfsignedcert"),children:i.renderCheckboxViaFormControl("authentication.useSelfSignedCert","Use Self-Signed Certificate for Authorization requests","",!1)})]})},i.renderOauth2CommonAdvanced=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.audience"),children:i.renderInputTextControlViaFormControl("authentication.audience","Audience","https://example.com/oauth/audience","TEXT",!1,!1)}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.resource"),children:i.renderInputTextControlViaFormControl("authentication.resource","Resource","https://example.com/oauth/resource","TEXT",!1,!1)})]})},i.renderOauth2ClientCredentials=function(){return(0,j.jsxs)(j.Fragment,{children:[i.renderOauth2Common(),i.renderOauth2CommonAdvanced()]})},i.renderOauth2AuthorizationCode=function(){var e=i.props.formData,n=window.location.origin+"/api/v1/datasources/authorize";return(0,j.jsxs)(j.Fragment,{children:[i.renderOauth2Common(),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.authorizationUrl"),children:i.renderInputTextControlViaFormControl("authentication.authorizationUrl","Authorization URL","https://example.com/login/oauth/authorize","TEXT",!1,!1)}),(0,j.jsx)(ze,{children:(0,j.jsxs)("div",{style:{width:"20vw"},children:[(0,j.jsxs)(ge.Z,{children:["Redirect URL",(0,j.jsx)("br",{}),(0,j.jsx)(te.jx,{children:"Url that the oauth server should redirect to"})]}),(0,j.jsx)(ke,{copyText:n})]})}),(0,j.jsx)(ze,{"data-replay-id":btoa("authentication.customAuthenticationParameters"),children:i.renderKeyValueControlViaFormControl("authentication.customAuthenticationParameters","Custom Authentication Parameters","",!1)}),!g().get(e.authentication,"isAuthorizationHeader",!0)&&i.renderOauth2CommonAdvanced()]})},i.state={confirmDelete:!1},i}return(0,d.Z)(t,[{key:"componentDidMount",value:function(){this.props.initializeReplayEntity(this.props.datasource.id,this.props.initialValues)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.props.formData){if(this.state.confirmDelete)g().debounce((function(){e.props.isDeleting||e.setState({confirmDelete:!1})}),2200)();var n=this.props.formData.authType;n===oe.Gr.OAuth2?this.ensureOAuthDefaultsAreCorrect():n===oe.Gr.apiKey&&this.ensureAPIKeyDefaultsAreCorrect()}}},{key:"isDirty",value:function(e){var n=this.props.formMeta;return g().get(n,e+".visited",!1)}},{key:"renderInputTextControlViaFormControl",value:function(e,n,t,i,r,a,o){return(0,j.jsx)(ne.Z,{config:{id:"",isValid:!1,isRequired:a,controlType:"INPUT_TEXT",dataType:i,configProperty:e,encrypted:r,label:n,conditionals:{},placeholderText:t,formName:A.b6,validator:o},formName:A.b6,multipleConfig:[]})}},{key:"renderDropdownControlViaFormControl",value:function(e,n,t,i,r,a,o){var s={id:"",isValid:!1,isRequired:r,controlType:"DROP_DOWN",configProperty:e,options:n,subtitle:a,label:t,conditionals:{},placeholderText:i,formName:A.b6,initialValue:o};return(0,j.jsx)(ne.Z,{config:s,formName:A.b6,multipleConfig:[]})}},{key:"renderKeyValueControlViaFormControl",value:function(e,n,t,i){var r={id:"",configProperty:e,isValid:!1,controlType:"KEYVALUE_ARRAY",placeholderText:t,label:n,conditionals:{},formName:A.b6,isRequired:i};return(0,j.jsx)(ne.Z,{config:r,formName:A.b6,multipleConfig:[]})}},{key:"renderFilePickerControlViaFormControl",value:function(e,n,t,i,r){var a={id:"",configProperty:e,isValid:!1,controlType:"FILE_PICKER",placeholderText:t,encrypted:r,label:n,conditionals:{},formName:A.b6,isRequired:i};return(0,j.jsx)(ne.Z,{config:a,formName:A.b6,multipleConfig:[]})}},{key:"renderCheckboxViaFormControl",value:function(e,n,t,i){return(0,j.jsx)(ne.Z,{config:{id:"",isValid:!1,isRequired:i,controlType:"CHECKBOX",configProperty:e,label:n,conditionals:{},placeholderText:t,formName:A.b6},formName:A.b6})}}]),t}(u.Component),Ke=(0,p.$j)((function(e,n){var t=e.entities.datasources.list.find((function(e){return e.id===n.datasourceId})),i=t&&t.messages;return{initialValues:se(t),datasource:t,actions:e.entities.actions,formData:(0,h.Z)(A.b6)(e),formMeta:(0,ee.Z)(A.b6)(e),messages:i}}),(function(e){return{initializeReplayEntity:function(n,t){return e((0,Ne.n6)(n,t,Fe.lU.DATASOURCE))},updateDatasource:function(n,t){return e((0,x.Y_)(n,t))},deleteDatasource:function(n){e((0,x.Vl)({id:n}))}}}))((0,z.Z)({form:A.b6,enableReinitialize:!0})(Ye)),qe=t(75691),Xe=t(77324),Je=t(95708),We=t(56244),Qe=t(35581),$e=t(7526),en=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,d.Z)(t,[{key:"componentDidUpdate",value:function(e){"RestAPIDatasourceForm"!==this.props.pluginDatasourceForm&&this.props.datasourceId&&this.props.datasourceId!==e.datasourceId&&this.props.switchDatasource(this.props.datasourceId)}},{key:"componentDidMount",value:function(){if(this.props.datasourceId&&"RestAPIDatasourceForm"!==this.props.pluginDatasourceForm&&this.props.switchDatasource(this.props.datasourceId),"RestAPIDatasourceForm"===this.props.pluginDatasourceForm&&this.props.location){var e=new URLSearchParams(this.props.location.search),n=e.get("response_status"),t=e.get("display_message");if(n){var i=he.GkW,r=Z.$e.danger;"success"===n?(i=he.B5v,r=Z.$e.success):"appsmith_error"===n&&(i=he.uuC),Z.x7.show({text:t||(0,he.tnH)(i),variant:r})}}}},{key:"render",value:function(){var e=this.props,n=e.datasourceId,t=e.formConfig,i=e.formData,r=e.fromImporting,a=e.isDeleting,o=e.isNewDatasource,s=e.isSaving,d=e.isTesting,l=e.openOmnibarReadMore,c=e.pageId,u=e.pluginId,p=e.pluginImages,h=e.pluginType,f=e.setDatasourceEditorMode,g=e.viewMode;return(0,j.jsx)(W,{applicationId:this.props.applicationId,datasourceId:n,formConfig:t,formData:i,formName:A._8,hiddenHeader:r,isDeleting:a,isNewDatasource:o,isSaving:s,isTesting:d,openOmnibarReadMore:l,pageId:c,pluginImage:p[u],pluginType:h,setDatasourceEditorMode:f,viewMode:g&&!r})}}]),t}(u.Component),nn=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,d.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.datasourceId,t=e.fromImporting,i=e.history,r=e.isDeleting,a=e.isNewDatasource,s=e.isSaving,d=e.location,l=e.pageId,c=e.pluginDatasourceForm,u=e.pluginId,p=e.pluginImages,h=e.pluginPackageName,f=e.pluginType,g=e.viewMode;return!u&&n?(0,j.jsx)(qe.Z,{}):"RestAPIDatasourceForm"!==c||g&&!t?"SAAS"===f?t?(0,j.jsx)(We.Z,{datasourceId:n,hiddenHeader:!0,pageId:l,pluginPackageName:h}):(i.push((0,$e.AP)({pageId:l,pluginPackageName:h,datasourceId:n})),null):(0,j.jsx)(en,(0,o.Z)((0,o.Z)({},this.props),{},{datasourceId:n,pageId:l})):(0,j.jsx)(Ke,{applicationId:this.props.applicationId,datasourceId:n,hiddenHeader:t,isDeleting:r,isNewDatasource:a,isSaving:s,location:d,pageId:l,pluginImage:p[u]})}}]),t}(u.Component),tn=(0,p.$j)((function(e,n){var t,i,r,a,o,s,d,l,c,u,p,f,x,v=null!==(t=n.datasourceId)&&void 0!==t?t:null===(i=n.match)||void 0===i||null===(r=i.params)||void 0===r?void 0:r.datasourceId,C=e.ui.datasourcePane,y=e.entities,T=y.datasources,I=y.plugins,b=(0,m.qO)(e,v),Z=I.formConfigs,E=(0,h.Z)(A._8)(e),S=g().get(b,"pluginId",""),j=(0,m.s3)(e,S),D=(0,Qe.AJ)(e),P=D.applicationSlug,w=D.pageSlug;return{datasourceId:v,pluginImages:(0,m.x8)(e),formData:E,fromImporting:null!==(a=n.fromImporting)&&void 0!==a&&a,pluginId:S,isSaving:T.loading,isDeleting:!(null===b||void 0===b||!b.isDeleting),isTesting:T.isTesting,formConfig:Z[S]||[],isNewDatasource:C.newDatasource===v,pageId:null!==(o=n.pageId)&&void 0!==o?o:null===(s=n.match)||void 0===s||null===(d=s.params)||void 0===d?void 0:d.pageId,viewMode:null!==(l=C.viewMode[null!==(c=null===b||void 0===b?void 0:b.id)&&void 0!==c?c:""])&&void 0!==l?l:!n.fromImporting,pluginType:null!==(u=null===j||void 0===j?void 0:j.type)&&void 0!==u?u:"",pluginDatasourceForm:null!==(p=null===j||void 0===j?void 0:j.datasourceComponent)&&void 0!==p?p:Je.oY.AutoForm,pluginPackageName:null!==(f=null===j||void 0===j?void 0:j.packageName)&&void 0!==f?f:"",applicationId:null!==(x=n.applicationId)&&void 0!==x?x:(0,Qe.aS)(e),applicationSlug:P,pageSlug:w}}),(function(e,n){return{switchDatasource:function(t){e((0,x.XQ)(t,n.fromImporting))},setDatasourceEditorMode:function(n,t){return e((0,x.QO)({id:n,viewMode:t}))},openOmnibarReadMore:function(n){e((0,Xe.nt)(n)),e((0,Xe.Lm)())}}}))(nn)},75691:function(e,n,t){t.d(n,{Z:function(){return u}});var i,r=t(17186),a=(t(72791),t(86538)),o=t(16054),s=t(46898),d=t(79271),l=t(80184),c=a.ZP.div(i||(i=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  padding-top: 15%;\n  background: #fcfcfc;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  .page-details {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 450px;\n  }\n  .bold-text {\n    font-weight: ",";\n    font-size: 24px;\n    margin-top: 20px;\n  }\n  .page-message {\n    margin-top: 14px;\n    color: #716e6e;\n    font-size: 14px;\n    line-height: 17px;\n    letter-spacing: 0.733333px;\n  }\n  .page-unavailable-img {\n    width: 72px;\n  }\n  .button-position {\n    margin-top: 14px;\n  }\n"])),(function(e){return e.theme.fontWeights[3]}));var u=function(e){var n=(0,d.k6)();return(0,l.jsxs)(c,{children:[(0,l.jsx)("img",{alt:"Page Unavailable",className:"page-unavailable-img",src:"data:image/png;base64,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"}),(0,l.jsxs)("div",{className:"page-details",children:[(0,l.jsx)("p",{className:"bold-text",children:(0,s.tnH)(s.o7H)}),(0,l.jsx)("p",{className:"page-message",children:(0,s.tnH)(s.Z8S)}),(0,l.jsx)(o.zx,{category:o.WD.secondary,className:"button-position",cypressSelector:"t--invalid-page-go-back",onClick:e.goBackFn?e.goBackFn:n.goBack,size:o.$u.large,tag:"button",text:"Go Back"})]})]})}},56244:function(e,n,t){var i,r=t(27853),a=t(84531),o=t(81020),s=t(18334),d=t(17186),l=(t(72791),t(86538)),c=t(763),u=t.n(c),p=t(31591),h=t(72462),f=t(16054),g=t(22871),m=t(73931),x=t(52628),A=t(23861),v=t(93512),C=t(23074),y=t(27966),T=t(60309),I=t(35581),b=t(77239),Z=t(75691),E=t(7526),S=t(80184),j=(0,l.ZP)(f.zx)(i||(i=(0,d.Z)(["\n  padding: 10px 20px;\n  &&&& {\n    height: 32px;\n    max-width: 160px;\n    border: 1px solid ",";\n    width: auto;\n  }\n"])),T.w.HIT_GRAY),D=function(e){(0,o.Z)(t,e);var n=(0,s.Z)(t);function t(){var e;(0,r.Z)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).getSanitizedData=function(){return e.normalizeValues()},e.renderDataSourceConfigForm=function(n){var t=e.props,i=t.datasource,r=t.datasourceButtonConfiguration,a=t.datasourceId,o=t.formData,s=t.hiddenHeader,d=t.pageId,l=t.pluginPackageName,c=location.search,p=!s&&new URLSearchParams(c).get("viewMode");return(0,S.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[!s&&(0,S.jsxs)(v.h4,{children:[(0,S.jsxs)(v.vU,{children:[(0,S.jsx)(v.cm,{alt:"Datasource",src:e.props.pluginImage}),(0,S.jsx)(h.Z,{focusOnMount:e.props.isNewDatasource})]}),p&&(0,S.jsx)(j,{category:f.WD.tertiary,className:"t--edit-datasource",onClick:function(){e.props.history.replace((0,E.AP)({pageId:d||"",pluginPackageName:l,datasourceId:a,params:{viewMode:!1}}))},text:"EDIT"})]}),p?(0,S.jsx)(y.Z,{}):(0,S.jsxs)(S.Fragment,{children:[u().isNil(n)?null:u().map(n,e.renderMainSection),""]}),i&&(0,S.jsx)(b.ZP,{datasource:i,datasourceButtonConfiguration:r,formData:o,getSanitizedFormData:u().memoize(e.getSanitizedData),isInvalid:e.validate(),pageId:d,shouldRender:!p})]})},e}return(0,a.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.formConfig;if(!e.pluginId)return(0,S.jsx)(Z.Z,{});var t=this.renderDataSourceConfigForm(n);return this.renderForm(t)}}]),t}(v.nm);n.Z=(0,x.$j)((function(e,n){var t,i,r,a,o,s,d=n.datasourceId||(null===(t=n.match)||void 0===t||null===(i=t.params)||void 0===i?void 0:i.datasourceId),l=e.ui.datasourcePane,h=e.entities,f=h.datasources,m=h.plugins,x=(0,A.qO)(e,d),v=m.formConfigs,y=(0,g.Z)(p.Y4)(e),T=u().get(x,"pluginId",""),b=v[T],Z={};return b&&(0,c.merge)(Z,(0,C.AI)(b)),(0,c.merge)(Z,x),{datasource:x,datasourceButtonConfiguration:(0,A.Ds)(e,null===y||void 0===y?void 0:y.pluginId),datasourceId:d,isSaving:f.loading,isDeleting:!(null===x||void 0===x||!x.isDeleting),formData:y,formConfig:b,isNewDatasource:l.newDatasource===d,pageId:n.pageId||(null===(r=n.match)||void 0===r||null===(a=r.params)||void 0===a?void 0:a.pageId),pluginImage:(0,A.x8)(e)[T],pluginPackageName:n.pluginPackageName||(null===(o=n.match)||void 0===o||null===(s=o.params)||void 0===s?void 0:s.pluginPackageName),initialValues:Z,pluginId:T,actions:e.entities.actions,formName:p.Y4,applicationId:(0,I.aS)(e)}}))((0,m.Z)({form:p.Y4,enableReinitialize:!0})(D))},51165:function(e,n,t){t.d(n,{Z:function(){return h}});var i,r,a=t(17186),o=(t(72791),t(16054)),s=t(86538),d=t(60309),l=t(80184),c=s.ZP.div(i||(i=(0,a.Z)(["\n  display: flex;\n  ",";\n  ",";\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n\n  padding: ",";\n\n  width: 100%;\n\n  align-items: center;\n"])),(0,o.z8)("p0"),(function(e){return function(e){return e.selected?"color: ".concat(e.theme.colors.tabItemBackgroundFill.highlightTextColor,";\n      font-weight: 500;\n      border-bottom: 2px solid ").concat(e.theme.colors.info.light,";\n\n     "):"color: ".concat(d.w.GREY_7,"\n      ")}(e)}),(function(e){return e.theme.colors.tabItemBackgroundFill.highlightTextColor}),(function(e){return"".concat(e.theme.spaces[5],"px 0px")}));function u(e){var n=e.selected,t=e.tab,i=e.vertical;return(0,l.jsx)(c,{selected:n,vertical:i,children:t.title},t.title)}var p=s.ZP.div(r||(r=(0,a.Z)(["\n  .react-tabs {\n    border-bottom: 1px solid ",";\n  }\n  .react-tabs__tab {\n    margin-right: 0px;\n    padding-right: ","px;\n  }\n"])),d.w.ALTO2,(function(e){return e.theme.spaces[8]}));function h(e){return(0,l.jsx)(p,{children:(0,l.jsx)(o.id,{onSelect:e.onSelect,selectedIndex:e.activeTabIndex||0,tabItemComponent:u,tabs:e.options})})}},80669:function(e,n,t){t.d(n,{Z:function(){return se}});var i,r,a,o=t(89472),s=t(50678),d=t(17186),l=t(72791),c=t(18879),u=t(52628),p=t(51165),h=t(75109),f=t(16054),g=t(60309),m=t(86538),x=t(763),A=t(42750),v=t(46898),C=t(23861),y=t(28663),T=t(68855),I=t(34404),b=t(40641),Z=t(75623),E=t(93512),S=t(80184),j=m.ZP.div(i||(i=(0,d.Z)(["\n  display: flex;\n  height: 64px;\n  width: 100%;\n  padding: 10px 18px;\n  margin-bottom: 10px;\n  cursor: pointer;\n  opacity: ",";\n  &.active,\n  &:hover {\n    background-color: ",";\n  }\n  img {\n    width: 24pxx;\n    height: 22.5px;\n    margin-right: ","px;\n  }\n"])),(function(e){return e.disabled?.4:1}),g.w.GEYSER_LIGHT,(function(e){return e.theme.spaces[3]})),D=m.ZP.div(r||(r=(0,d.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),P=m.ZP.div(a||(a=(0,d.Z)(["\n  width: 100%;\n  display: flex;\n  margin-bottom: ","px;\n  .t--ds-list-title {\n    max-width: 120px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.spaces[2]}));var w,k,R,O,N,F,U,z,V,H,_,L,G=function(e){var n=e.ds,t=e.onClick,i=e.plugin,r=e.selected;return(0,S.jsxs)(j,{className:"t--ds-list ".concat(r?"active":""),onClick:function(){return t(n)},children:[(0,S.jsx)(E.cm,{alt:"Datasource",src:i.image}),(0,S.jsxs)(D,{children:[(0,S.jsxs)(P,{children:[(0,S.jsx)(f.xv,{className:"t--ds-list-title",color:g.w.GRAY_800,type:f.yG.H4,children:n.name}),(0,S.jsx)(f.JO,{fillColor:n.isConfigured?g.w.GREEN:g.w.ERROR_RED,name:n.isConfigured?"oval-check":"info",size:f.Jh.MEDIUM})]}),(0,S.jsx)(f.xv,{color:g.w.GRAY_700,type:f.yG.H5,children:i.name})]})]})},M=t(44763),B=t(68219),Y=t(40200),K=t(7526),q=t(93815),X=m.ZP.div(w||(w=(0,d.Z)(["\n  height: 765px;\n  max-height: 82vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow-y: hidden;\n  padding: 0px 10px 0px 0px;\n"]))),J=m.ZP.div(k||(k=(0,d.Z)(["\n  margin-bottom: ","px;\n  width: calc(100% - 206px);\n"])),(function(e){return e.theme.spaces[11]})),W=m.ZP.div(R||(R=(0,d.Z)(["\n  flex: 3;\n  height: calc(100% - ","px);\n  padding-left: ","px;\n"])),h.d0,(function(e){return e.theme.spaces[8]})),Q=m.ZP.div(O||(O=(0,d.Z)(["\n  height: ","px;\n  padding-left: ","px;\n\n  .react-tabs {\n    width: 1029px;\n  }\n"])),h.d0,(function(e){return e.theme.spaces[8]})),$=m.ZP.div(N||(N=(0,d.Z)(["\n  height: calc(100% - 76px);\n  display: flex;\n  margin-left: -",'px;\n\n  .t--json-to-form-wrapper {\n    width: 100%;\n\n    .t--close-editor {\n      display: none;\n    }\n\n    div[class^="JSONtoForm__DBForm-"] {\n      padding-top: 0px;\n\n      div[class^="JSONtoForm__SaveButtonContainer-"] {\n        button:first-child {\n          display: none;\n        }\n      }\n    }\n\n    .t--collapse-top-border {\n      height: 1px;\n      margin-top: ',"px;\n      margin-bottom: ","px;\n\n      &:first-child {\n        display: none;\n      }\n    }\n\n    .t--collapse-section-container {\n      width: 816px;\n\n      & > div {\n        color: ",';\n      }\n    }\n\n    .label-icon-wrapper div[class^="IconConstants__IconWrapper-"] {\n      width: 12px;\n      height: 14px;\n      margin-left: 6px;\n      margin-right: 6px;\n\n      svg {\n        width: 12px;\n        height: 14px;\n\n        path {\n          fill: ',';\n        }\n      }\n    }\n\n    div > label[class^="StyledFormComponents__StyledFormLabel-"] {\n      &:last-child {\n        width: 140px !important;\n      }\n    }\n  }\n\n  .t--message-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n'])),(function(e){return e.theme.spaces[8]}),(function(e){return e.theme.spaces[10]}),(function(e){return e.theme.spaces[10]}),g.w.BLACK,g.w.GREEN),ee=m.ZP.div(F||(F=(0,d.Z)(["\n  height: 100%;\n  overflow: auto;\n  width: 206px;\n\n  .t--collapse-top-border {\n    display: none;\n  }\n\n  .t--collapse-section-container {\n    width: 90%;\n    margin-left: 5%;\n    margin-bottom: ","px;\n\n    & > div {\n      font-style: normal;\n      font-weight: normal;\n      font-size: 12px;\n      line-height: 16px;\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.spaces[11]+2}),g.w.BLACK),ne=m.ZP.div(U||(U=(0,d.Z)(["\n  font-size: ","px;\n  line-height: ","px;\n  letter-spacing: ","px;\n  color: ",";\n  text-align: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.typography.p0.fontSize}),(function(e){return e.theme.typography.p0.lineHeight}),(function(e){return e.theme.typography.p0.letterSpacing}),g.w.GREY_9,(function(e){return e.theme.spaces[7]})),te=m.ZP.div(z||(z=(0,d.Z)(["\n  position: absolute;\n  right: ","px;\n  top: ","px;\n\n  padding: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return-e.theme.spaces[4]}),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.radii[1]})),ie=m.ZP.div(V||(V=(0,d.Z)(["\n  position: absolute;\n  right: 0px;\n  top: ","px;\n\n  padding: ",";\n"])),(function(e){return e.theme.spaces[11]}),(function(e){return"".concat(e.theme.spaces[3],"px ").concat(e.theme.spaces[7]-1,"px")})),re=m.ZP.div(H||(H=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n"]))),ae=m.ZP.div(_||(_=(0,d.Z)(['\n  padding: 10px;\n  width: calc(100% - 206px);\n  overflow: auto;\n\n  div[class^="RestAPIDatasourceForm__RestApiForm-"] {\n    padding-top: 0px;\n    height: 100%;\n  }\n\n  .t--delete-datasource {\n    display: none;\n  }\n'])));function oe(){return(0,S.jsxs)(re,{children:[(0,S.jsx)(f.xv,{color:g.w.WHITE,style:{marginBottom:"4px"},type:f.yG.P3,children:(0,v.tnH)(v.WaY)}),(0,S.jsx)(f.xv,{color:g.w.WHITE,type:f.yG.P3,children:(0,v.tnH)(v.sZF)})]})}!function(e){e.SUCCESS="success",e.APPSMITH_ERROR="appsmith_error"}(L||(L={}));var se=function(){var e=(0,m.Fg)(),n=(0,u.I0)(),t=(0,u.v9)(C.YZ),i=(0,u.v9)(c.xz),r=(0,u.v9)(c.su),a=(0,u.v9)(C._K),d=(0,u.v9)(C.x8),E=(0,u.v9)(C.AR),j=(0,u.v9)(C.$A),D=(0,u.v9)(C.S5),P=(0,u.v9)(C.xO),w=JSON.parse(q.ZP.getItem("importedAppPendingInfo")||"null"),k=(0,u.v9)(c.Me),R=(0,Z.aM)(),O=R.get("appId")||(w?w.appId:null),N=R.get("pageId")||(w?w.pageId:null),F=R.get("datasourceId")||(w?w.datasourceId:null),U="true"===R.get("importForGit")||!!w,z=(0,l.useState)(F),V=(0,s.Z)(z,2),H=V[0],_=V[1],re=(0,l.useState)(N),se=(0,s.Z)(re,2),de=se[0],le=se[1],ce=(0,l.useState)(O),ue=(0,s.Z)(ce,2),pe=ue[0],he=ue[1],fe=(0,l.useState)(""),ge=(0,s.Z)(fe,2),me=ge[0],xe=ge[1],Ae=(0,l.useState)(null),ve=(0,s.Z)(Ae,2),Ce=ve[0],ye=ve[1],Te=(0,l.useState)(U),Ie=(0,s.Z)(Te,2),be=Ie[0],Ze=Ie[1],Ee=(0,l.useState)(!1),Se=(0,s.Z)(Ee,2),je=Se[0],De=Se[1];if(be){Ze(!1);var Pe=R.get("response_status"),we=R.get("display_message"),ke=f.$e.danger;if(Pe!==L.SUCCESS){var Re=Pe===L.APPSMITH_ERROR?v.sSc:v.rqT;f.x7.show({text:we||Re,variant:ke})}else F&&n((0,Y.$z)(F));b.Z.logEvent("DATASOURCE_AUTH_COMPLETE",{queryAppId:O,queryDatasourceId:F,queryPageId:N})}(0,l.useEffect)((function(){if(k&&U&&F&&O){var e,t=(0,o.Z)(k);try{for(t.s();!(e=t.n()).done;){var i=e.value,s=i.applications,d=i.workspace,l=s.find((function(e){return e.id===O}));if(l){n((0,y.F5)(d.id)),n((0,y.di)({isOpen:!0}));var c=(0,M.Sf)(l.pages);r?le(r):c&&le(c),a.length||n({type:B.Ep.FETCH_UNCONFIGURED_DATASOURCE_LIST,payload:{applicationId:pe,workspaceId:d.id}});break}}}catch(u){t.e(u)}finally{t.f()}}}),[k,U]);var Oe=(0,u.v9)(c.Xj);(0,l.useEffect)((function(){t&&i&&n((0,y.ED)(i))}),[i,t]),(0,l.useEffect)((function(){t&&(P&&De(!1),D&&De(!0))}),[t,D,P]);var Ne=(0,l.useCallback)((function(){q.ZP.setItem("importedAppPendingInfo","null"),n((0,y.di)({isOpen:!1})),n((0,y.F5)("")),n((0,y.fA)("")),n((0,y.Rt)()),_("")}),[n,y.di,t]),Fe=(0,l.useCallback)((function(e){De(!1),_(e.id),ye(e),b.Z.logEvent("RECONNECTING_DATASOURCE_ITEM_CLICK",{id:e.id,name:e.name,pluginName:E[e.id],isConfigured:e.isConfigured})}),[]);(0,l.useEffect)((function(){var e;Oe&&a&&!H&&!U&&(ye(a[0]),_(null!==(e=a[0].id)&&void 0!==e?e:""))}),[Oe,H,U]);var Ue=(0,u.v9)(c.Mn);(0,l.useEffect)((function(){if(!U){var e,n=null===Ue||void 0===Ue||null===(e=Ue.pages)||void 0===e?void 0:e.find((function(e){return e.isDefault}));n&&(le(n.id),he(null===Ue||void 0===Ue?void 0:Ue.id))}}),[Ue,U]),(0,l.useEffect)((function(){de&&pe&&a.length&&xe((0,K.K3)({pageId:de}))}),[de,pe,a]),(0,l.useEffect)((function(){if(t&&!je){if("true"!==R.get("importForGit")&&a.length){var e,n,i=a.find((function(e){return e.id===H}));if(i)if((null===(e=i.datasourceConfiguration)||void 0===e||null===(n=e.authentication)||void 0===n?void 0:n.authenticationType)===T.Gr.OAUTH2)return}var r=H,o=a.filter((function(e){return!e.isConfigured}));if(o.length>0){var s=void 0;if(r){var d=a.findIndex((function(e){return e.id===r}));if(d>-1&&!a[d].isConfigured)return;s=a.slice(d+1).find((function(e){return!e.isConfigured}))}s=s||o[0],_(s.id),ye(s);var l={appId:pe,pageId:de,datasourceId:s.id};q.ZP.setItem("importedAppPendingInfo",JSON.stringify(l))}else me&&(q.ZP.setItem("importApplicationSuccess","true"),q.ZP.setItem("importedAppPendingInfo","null"),window.open(me,"_self"))}}),[a,me,t,je,U]);var ze=a.map((function(e){return(0,S.jsx)(G,{ds:e,onClick:function(){Fe(e)},plugin:{name:E[e.pluginId],image:d[e.pluginId]},selected:e.id===H},e.id)})),Ve=Oe&&!j&&!(null!==Ce&&void 0!==Ce&&Ce.isConfigured);return(0,S.jsx)(f.au,{canEscapeKeyClose:!0,canOutsideClickClose:!0,className:h.PZ.RECONNECT_DATASOURCE_MODAL,isOpen:t,maxWidth:"1300px",onClose:Ne,width:"1293px",children:(0,S.jsxs)(X,{children:[(0,S.jsx)(Q,{children:(0,S.jsx)(p.Z,{activeTabIndex:0,onSelect:function(){},options:[{key:"RECONNECT_DATASOURCES",title:"Reconnect Datasources"}]})}),(0,S.jsxs)(W,{children:[(0,S.jsx)(A.Dx,{children:(0,v.tnH)(v.SwX)}),(0,S.jsx)(J,{children:(0,S.jsx)(f.xv,{color:g.w.BLACK,type:f.yG.P1,children:(0,v.tnH)(v.p7N)})}),(0,S.jsxs)($,{children:[(0,S.jsx)(ee,{children:ze}),Ve&&(0,S.jsx)(ae,{children:(0,S.jsx)(I.Z,{applicationId:pe,datasourceId:H,fromImporting:!0,pageId:de})}),(null===Ce||void 0===Ce?void 0:Ce.isConfigured)&&(0,S.jsxs)(J,{className:"t--message-container",children:[(0,S.jsx)(ne,{children:(0,v.tnH)(v.sHT)}),(0,S.jsx)(ne,{children:(0,v.tnH)(v.nrS)})]})]})]}),(0,S.jsx)(ie,{children:(0,S.jsx)(f.KZ,{boundary:"viewport",content:(0,S.jsx)(oe,{}),maxWidth:"320px",position:"bottom-right",children:(0,S.jsx)(f.zx,{category:f.WD.tertiary,className:"t--skip-to-application-btn",href:me,onClick:function(){b.Z.logEvent("RECONNECTING_SKIP_TO_APPLICATION_BUTTON_CLICK"),q.ZP.setItem("importedAppPendingInfo","null")},size:f.$u.medium,text:(0,v.tnH)(v.WaY)})})}),(0,S.jsx)(te,{className:"t--reconnect-close-btn",onClick:Ne,children:(0,S.jsx)(f.JO,{fillColor:(0,x.get)(e,"colors.gitSyncModal.closeIcon"),name:"close-modal",size:f.Jh.XXXXL})})]})})}},42750:function(e,n,t){t.d(n,{Dx:function(){return u},QE:function(){return p},T:function(){return f},YS:function(){return h}});var i,r,a,o,s=t(17186),d=t(86538),l=t(16054),c=t(60309),u=d.ZP.p(i||(i=(0,s.Z)(["\n  ",";\n  margin: ",";\n  color: ",";\n"])),(0,l.z8)("h1"),(function(e){return"".concat(e.theme.spaces[7],"px 0px ").concat(e.theme.spaces[3],"px 0px")}),c.w.GREY_900),p=d.ZP.div(r||(r=(0,s.Z)(["\n  margin-top: 8px;\n  ",";\n  color: ",";\n"])),(0,l.z8)("p1"),c.w.GREY_900),h=d.ZP.span(a||(a=(0,s.Z)(["\n  ",";\n"])),(0,l.z8)("p1")),f=d.ZP.div(o||(o=(0,s.Z)(["\n  margin: ",";\n"])),(function(e){return e.horizontal?"0px ".concat(e.theme.spaces[e.size],"px "):"".concat(e.theme.spaces[e.size],"px 0px")}))},45224:function(e,n,t){var i,r,a=t(17186),o=(t(72791),t(52628)),s=t(86538),d=t(37305),l=t(16054),c=t(46898),u=t(18879),p=t(33590),h=t(73947),f=t(40641),g=t(72014),m=t(77916),x=t(89809),A=t(60309),v=t(51653),C=t(9724),y=t(23234),T=t(80184),I=s.ZP.div(i||(i=(0,a.Z)(["\n  padding-bottom: ","px;\n  background-color: ",";\n  width: 100%;\n  margin-top: auto;\n\n  & .ads-dialog-trigger {\n    margin-top: ","px;\n  }\n\n  & .ads-dialog-trigger > div {\n    position: initial;\n    width: 92%;\n    padding: ",";\n  }\n"])),(function(e){return e.theme.spaces[3]}),A.w.WHITE,(function(e){return e.theme.spaces[1]}),(function(e){return"".concat(e.theme.spaces[0],"px ").concat(e.theme.spaces[6],"px")})),b=s.ZP.div(r||(r=(0,a.Z)(["\n  display: flex;\n  justify-content: space-between;\n  color: ",";\n  font-size: 8px;\n  width: 92%;\n  margin-top: ","px;\n"])),A.w.MIRAGE_2,(function(e){return e.theme.spaces[3]}));n.Z=function(){var e=(0,o.I0)(),n=(0,o.v9)(p.$x),t=(0,o.v9)(u.ZO),i=(0,h.x)(),r=i.appVersion,a=i.cloudHosting,s=(0,g.dU)(r.releaseDate),A=(0,o.v9)(y.ts);return(0,T.jsxs)(I,{children:[(null===A||void 0===A?void 0:A.isSuperUser)&&(null===A||void 0===A?void 0:A.isConfigurable)&&!t&&(0,T.jsx)(l.sN,{className:"admin-settings-menu-option",icon:"setting",onSelect:function(){(0,v.er)(v.DT.REDIRECT,{path:C.fD})},text:(0,c.tnH)(c.AIM)}),(0,T.jsx)(l.sN,{className:t?d.Ms1:"",icon:"discord",onSelect:function(){window.open("https://discord.gg/rBTTVJp","_blank")},text:"Join our Discord"}),(0,T.jsx)(l.sN,{containerClassName:t?d.Ms1:"",icon:"book",onSelect:function(){window.open("https://docs.appsmith.com/","_blank")},text:(0,c.tnH)(c.tQ)}),!!n.length&&(0,T.jsx)(l.sN,{containerClassName:t?d.Ms1:"t--welcome-tour",icon:"guide",onSelect:function(){f.Z.logEvent("WELCOME_TOUR_CLICK"),e((0,m.fF)())},text:(0,c.tnH)(c.Fo$)}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(b,{children:[(0,T.jsx)("span",{children:(0,c.tnH)(c.XL2,r.edition,r.id,a)}),""!==s&&(0,T.jsxs)("span",{children:["Released ",s," ago"]})]})]})}},77239:function(e,n,t){var i,r,a,o,s=t(36222),d=t(50678),l=t(17186),c=t(72791),u=t(86538),p=t(93512),h=t(8236),f=t(52628),g=t(23861),m=t(40200),x=t(40641),A=t(9958),v=t(17823),C=t(35581),y=t(79271),T=t(86957),I=t(17909),b=t(68855),Z=t(46898),E=t(16054),S=t(763),j=t(80184);!function(e){e.SUCCESS="success",e.APPSMITH_ERROR="appsmith_error"}(a||(a={})),function(e){e.DELETE="DELETE",e.SAVE="SAVE",e.TEST="TEST",e.SAVE_AND_AUTHORIZE="SAVE_AND_AUTHORIZE"}(o||(o={}));var D="DELETE",P="SAVE",w="TEST",k="SAVE_AND_AUTHORIZE",R=(0,u.ZP)(h.Z)(i||(i=(0,l.Z)(["\n  &&&& {\n    height: 32px;\n    width: ",";\n  }\n"])),(function(e){return e.fluidWidth?"":"87px"})),O=u.ZP.div(r||(r=(0,l.Z)(["\n  color: ",';\n  margin-top: 15px;\n  &:after {\n    content: " *";\n    color: inherit;\n  }\n'])),(function(e){return e.theme.colors.error}));n.ZP=function(e){var n,t,i,r,o=e.datasource,l=e.datasourceButtonConfiguration,u=void 0===l?["DELETE","SAVE"]:l,h=e.formData,N=e.getSanitizedFormData,F=e.isInvalid,U=e.pageId,z=e.shouldRender,V=h&&(null===h||void 0===h||null===(n=h.datasourceConfiguration)||void 0===n||null===(t=n.authentication)||void 0===t?void 0:t.authenticationType),H=o.id,_=o.isDeleting,L=(0,f.v9)(C.aS),G=(0,f.I0)(),M=(0,y.TH)(),B=(0,y.UO)().pageId||U,Y=(0,c.useState)(!1),K=(0,d.Z)(Y,2),q=K[0],X=K[1];(0,c.useEffect)((function(){q&&$()}),[q]),(0,c.useEffect)((function(){if(V===b.Gr.OAUTH2){var e=new URLSearchParams(M.search),n=e.get("response_status"),t=e.get("importForGit"),i=e.get("datasourceId");if(n&&(!t||t&&i===H)){var r=e.get("display_message"),o=E.$e.danger;if(n!==a.SUCCESS){var s=n===a.APPSMITH_ERROR?Z.sSc:Z.rqT;E.x7.show({text:r||s,variant:o})}else G((0,m.$z)(H));x.Z.logEvent("DATASOURCE_AUTH_COMPLETE",{applicationId:L,datasourceId:H,pageId:B})}}}),[V]);var J=(0,f.v9)(g.uc).datasources,W=J.isTesting,Q=J.loading,$=(0,S.debounce)((function(){return X(!1)}),2200),ee=(0,f.v9)((function(e){return(0,g.gn)(e,H)})),ne=(0,f.v9)(g.YZ),te=(null===o||void 0===o||null===(i=o.datasourceConfiguration)||void 0===i||null===(r=i.authentication)||void 0===r?void 0:r.authenticationStatus)===b.y_.SUCCESS,ie=function(){x.Z.logEvent("TEST_DATA_SOURCE_CLICK",{pageId:B,appId:L}),G((0,m.YB)(N()))},re=function(){var e=(0,T.c)();x.Z.logEvent("SAVE_DATA_SOURCE_CLICK",{pageId:B,appId:L}),G((0,m.Y_)(N(),e||ne?void 0:G((0,A.HZ)(B,(0,v.vl)()))))},ae=function(){G((0,m.Y_)(N(),ee?(0,m.l8)(B,H,ee):void 0))},oe=function(e){var n;return(n={},(0,s.Z)(n,D,(0,j.jsx)(p.Kk,{buttonStyle:"DANGER",buttonVariant:I.lm.PRIMARY,className:"t--delete-datasource",loading:_,onClick:function(){q?G((0,m.Vl)({id:H})):X(!0)},text:q&&!_?(0,Z.tnH)(Z.fUd):(0,Z.tnH)(Z.mcU)})),(0,s.Z)(n,w,(0,j.jsx)(p.Kk,{buttonStyle:"PRIMARY",buttonVariant:I.lm.SECONDARY,className:"t--test-datasource",loading:W,onClick:ie,text:"Test"})),(0,s.Z)(n,P,(0,j.jsx)(R,{className:"t--save-datasource",disabled:F,filled:!0,intent:"primary",loading:Q,onClick:re,size:"small",text:"Save"})),(0,s.Z)(n,k,(0,j.jsx)(R,{className:"t--save-datasource",disabled:F,filled:!0,fluidWidth:!0,intent:"primary",loading:Q,onClick:ae,size:"small",text:te?"Save and Re-authorize":"Save and Authorize"})),n)[e]};return(0,j.jsxs)(j.Fragment,{children:[V===b.Gr.OAUTH2&&!te&&(0,j.jsx)(O,{children:"Datasource not authorized"}),z&&(0,j.jsx)(p.ZM,{children:null===u||void 0===u?void 0:u.map((function(e){return oe(e)}))}),""]})}}}]);
//# sourceMappingURL=475.2a0dd5db.chunk.js.map